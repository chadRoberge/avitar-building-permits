{{! Mobile Header }}
<div class="mobile-header {{if this.isMobileMenuOpen 'menu-open'}}">
  <div class="mobile-header-content">
    <div class="mobile-logo">
      <span class="mobile-logo-icon">üèõÔ∏è</span>
      <span class="mobile-logo-text">{{@municipality.name}}</span>
    </div>
    <button 
      type="button" 
      class="mobile-menu-toggle {{if this.isMobileMenuOpen 'active'}}"
      {{on "click" this.toggleSidebar}}
      aria-label="Toggle navigation menu"
    >
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
  </div>
</div>

{{! Mobile Menu Overlay }}
{{#if this.isMobileMenuOpen}}
  <div class="mobile-menu-overlay" {{on "click" this.closeMobileMenu}}></div>
{{/if}}

{{! Sidebar Navigation }}
<nav class="municipal-sidebar {{if this.isCollapsed 'collapsed'}} {{if this.isMobileMenuOpen 'mobile-open'}}">
  {{! Header Section }}
  <div class="sidebar-header">
    <div class="sidebar-logo">
      <span class="sidebar-logo-icon">üèõÔ∏è</span>
      {{#unless this.isCollapsed}}
        <div class="sidebar-logo-content">
          <h1 class="sidebar-title">{{@municipality.name}}</h1>
          <p class="sidebar-subtitle">Building Department</p>
        </div>
      {{/unless}}
    </div>
    
    {{! Desktop Toggle Button }}
    <button 
      type="button" 
      class="sidebar-toggle desktop-only {{if this.isCollapsed 'collapsed'}}"
      {{on "click" this.toggleSidebar}}
      aria-label="{{if this.isCollapsed 'Expand' 'Collapse'}} sidebar"
    >
      <span class="toggle-icon">{{if this.isCollapsed '‚ñ∂' '‚óÄ'}}</span>
    </button>
  </div>

  {{! Navigation Menu }}
  <div class="sidebar-menu">
    <ul class="nav-list">
      {{#each this.navigationItems as |item|}}
        <li class="nav-item">
          <LinkTo 
            @route={{item.route}} 
            class="nav-link {{if (eq this.router.currentRouteName item.route) 'active'}}"
            {{on "click" this.closeMobileMenu}}
          >
            <span class="nav-icon">{{item.icon}}</span>
            {{#unless this.isCollapsed}}
              <div class="nav-content">
                <span class="nav-label">{{item.label}}</span>
                <span class="nav-description">{{item.description}}</span>
              </div>
            {{/unless}}
            {{#if this.isCollapsed}}
              <div class="nav-tooltip">
                <span class="tooltip-text">{{item.label}}</span>
              </div>
            {{/if}}
          </LinkTo>
        </li>
      {{/each}}
    </ul>
  </div>

  {{! User Section }}
  <div class="sidebar-footer">
    <LinkTo @route="municipal.profile" class="user-profile-section" {{on "click" this.closeMobileMenu}}>
      <div class="user-avatar">
        <div class="avatar-circle">
          <span class="avatar-initials">
            {{this.userInitials}}
          </span>
        </div>
        <div class="status-indicator online"></div>
      </div>
      {{#unless this.isCollapsed}}
        <div class="user-details">
          <div class="user-name">{{@user.firstName}} {{@user.lastName}}</div>
          <div class="user-role">{{this.userRoleName}}</div>
          <div class="user-department">{{this.userDepartment}}</div>
        </div>
        <div class="profile-action">
          <svg class="chevron-icon" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
          </svg>
        </div>
      {{/unless}}
      {{#if this.isCollapsed}}
        <div class="nav-tooltip">
          <span class="tooltip-text">My Profile</span>
        </div>
      {{/if}}
    </LinkTo>
    
    <div class="user-actions">
      <button 
        type="button" 
        class="logout-btn {{if this.isCollapsed 'collapsed'}}"
        {{on "click" this.logout}}
        title="Sign Out"
      >
        <svg class="logout-icon" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd" />
        </svg>
        {{#unless this.isCollapsed}}
          <span class="logout-text">Sign Out</span>
        {{/unless}}
      </button>
    </div>
  </div>
</nav>

{{! Main Content Spacer }}
<div class="sidebar-spacer {{if this.isCollapsed 'collapsed'}}"></div>