{{page-title (concat "Sign In - " @model.municipality.name)}}

<div class="auth-container">
  <header class="avitar-header">
    <div class="container">
      <div class="row items-center">
        <div class="col-md-8">
          <div class="header-brand d-flex items-center mb-2">
            <div class="brand-icon">üèõÔ∏è</div>
            <div class="brand-content">
              <h1 class="brand-title">{{@model.municipality.name}}</h1>
              <p class="brand-subtitle text-capitalize">{{@model.userType}} Portal</p>
            </div>
          </div>
        </div>
        <div class="col-md-4 text-right">
          <div class="header-actions">
            <LinkTo @route="municipal-portal" @model={{@model.municipality._id}} class="btn btn-outline-secondary btn-sm">
              ‚Üê Back to Municipality Portal
            </LinkTo>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="container">
      <div class="row justify-center">
        <div class="col-lg-6 col-md-8">
          <div class="auth-card card shadow-lg">
            <div class="card-body p-5">
              <div class="auth-toggle mb-4">
                <div class="btn-group w-100" role="group">
                  <button 
                    type="button" 
                    class="btn {{if this.showSignIn 'btn-primary' 'btn-outline-primary'}} toggle-btn"
                    {{on "click" this.showSignInForm}}
                  >
                    Sign In
                  </button>
                  <button 
                    type="button" 
                    class="btn {{if this.showSignUp 'btn-primary' 'btn-outline-primary'}} toggle-btn"
                    {{on "click" this.showSignUpForm}}
                  >
                    Sign Up
                  </button>
                </div>
              </div>

              {{#if this.showSignIn}}
                <SignInForm @municipality={{@model.municipality}} @userType={{@model.userType}} />
              {{else if this.showSignUp}}
                {{#if (eq @model.userType "residential")}}
                  <ResidentialSignUpForm @municipality={{@model.municipality}} />
                {{else if (eq @model.userType "commercial")}}
                  <CommercialSignUpForm @municipality={{@model.municipality}} />
                {{/if}}
              {{else}}
                <div class="welcome-message text-center">
                  <div class="welcome-icon mb-3">üèõÔ∏è</div>
                  <h3 class="text-primary mb-3">Welcome to {{@model.municipality.name}}</h3>
                  <p class="text-muted">Please sign in to your existing account or sign up to create a new {{@model.userType}} account.</p>
                </div>
              {{/if}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>